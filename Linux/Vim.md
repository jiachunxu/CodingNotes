# VI VIM

## 常用三种模式

- 正常模式
  - 打开文本文件默认模式
- 插入模式
  - 默认模式按下 `i` 进入插入模式, 编辑文件
- 命令模式
  - 输入完成后, 按 `esc` 输入 `:` 进入命令模式, 例如: 输入 `:wq`,保存并退出

## vi 和 vim 快捷键

- yy : 复制当前一行 5yy : 向下复制5行
- dd : 删除当前行 5dd : 向下删除5行
- 查找单词 命令模式下 `/单词` ,回车 按 `n` 查找下一个
- 设置行号 命令模式下 `:set nu` ,取消行号 `:set nonu`, 也可以操作配置文件 `/etc/vim/vimrc`
- `G` 调到最后一行, `gg` 跳到第一行
- 撤销最近操作 `u`

## 删除全部内容

- 正常模式 : 键入 `%d` ,按Enter键以删除所有行

## 查找和替换

> :s（substitute）命令用来查找和替换字符串

`:{作用范围}s/{目标}/{替换}/{替换标志}`

### 作用范围

``` vim
# 当前行
:s/foo/bar/g

# 全文 
:%s/foo/bar/g

# 选区，在Visual模式下选择区域后输入:，Vim即可自动补全为 :'<,'>。
:'<,'>s/foo/bar/g

# 2-11 行
:5,12s/foo/bar/g

# 当前行.与接下来两行+2
:.,+2s/foo/bar/g

```

### 替换标志

> 命令结尾的g即是替换标志之一

``` vim 
# 空替换标志表示只替换从光标位置开始，目标的第一次出现
:%s/foo/bar

# i表示大小写不敏感查找，I表示大小写敏感
:%s/foo/bar/i
# 等效于模式中的\c（不敏感）或\C（敏感）
:%s/foo\c/bar

# c表示需要确认，例如全局查找"foo"替换为"bar"并且需要确认
:%s/foo/bar/gc
# 回车后Vim会将光标移动到每一次"foo"出现的位置，并提示
replace with bar (y/n/a/q/l/^E/^Y)?
# 按下y表示替换，n表示不替换，a表示替换所有，q表示退出查找模式， l表示替换当前位置并退出。E与Y是光标移动快捷键

```
